<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>s_battleBox</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-3</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>audio_pause_all()
audio_play_sound(battleMusic,1,1)
spawnEn()
done = 0
randomize()
appear = " has appeared!"
n = irandom(5)
if(n = 0) appear = " has appeared!"
if(n = 1) appear = " saunters towards you!"
if(n = 2) appear = " curses at you!"
if(n = 3) appear = " staggers near you!"
if(n = 4) appear = " lunges at you!"
if(n = 5) appear = " looks confused!"

dialog = ds_list_create()
ds_list_add(dialog,string(enPar.name) + string(appear) + "#") 

wait = 0
enPar.time = irandom(3)
with(player) time = irandom(3) + spd
x = view_xview[0]+340
y = view_yview[0]+240
pSprite = s_mPlayerDown
enImg = enPar.image_index

player.atacked = 16
enPar.attacked = 11
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>player.time = 0
audio_pause_all()
audio_resume_sound(slumMusic)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(instance_exists(enPar))
{
if(enPar.hp &lt;= 0)
{
drop = irandom(99)
if(drop &lt; enPar.drop and player.heals &lt; 9) dr = 1
else dr = 0
if(dr = 1) 
{
stim = choose(0,1)
if(!stim) bul = 1
if(stim) bul = 0
}
ds_list_clear(dialog)
ds_list_insert(dialog,0,string(enPar.name) + " dies! You get " + string(enPar.xp) + " EXP!") 
ds_list_insert(dialog,0,"You found " + string(enPar.cash) + " MON on their corpse!")
if(dr and stim)
{
ds_list_insert(dialog,0,string(enPar.name) + " had a stimpack on them!")
player.heals++
}
else if(dr and bul)
{
ds_list_insert(dialog,0,string(enPar.name) + " had some ammo on them!")
player.ammo += irandom(2) + 1
}
else ds_list_insert(dialog,0,"")
player.xp += enPar.xp
player.money += enPar.cash
if(player.xp &gt; player.mXp) ds_list_insert(dialog,0, "You leveled up!")
with(enPar) instance_destroy()
}
}

if(!instance_exists(enPar)) done++

if(done &gt; 15)
{
if(player.xKey or player.yKey or player.aKey or player.bKey)
{
ds_list_clear(dialog)
instance_destroy()
player.battle= 0
}
}
if(ds_list_size(dialog) &gt; 4) ds_list_delete(dialog,4)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>randomize()
if(!done and player.time = player.mTime)
{
if(player.xKey)
{
with(player) 
{
wAtt(enPar)
time = 0
}
}
if(player.bKey and player.ammo &gt; 0)
{
with(player)
{
gAtt(enPar)
ammo--
time = 0
}
}
if(player.aKey and player.heals &gt; 0 and wait = 0)
{
heal = (round(player.mHp /5)) + irandom(4) + 1
audio_play_sound(healSound,1,0)
player.hp += heal
ds_list_insert(dialog,0,string(player.name) + " heals for " + string(heal) + " damage!")
player.heals--
player.time = 0
}
if(player.yKey)
{
player.battle = 0
with(enPar) instance_destroy()
dialog = ""
done = 1
audio_play_sound(fleeSound,1,0)
ds_list_insert(dialog,0,"")
ds_list_insert(dialog,0,string(player.name) + " flees!")
player.time = 0
}
}

if(!done)
{
with(player) time += spd
with(enPar) time += spd
}

with(player) 
{
if(attacked = 15) battleBox.pSprite = s_mPlayerDown
if(attacked &lt; 15) attacked++
}
with(enPar) 
{
if(attacked = 10) 
{
image_index--
x -= 5
}
if(attacked &lt; 12) attacked++
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_self()
draw_set_font(battleFnt)
draw_set_color(c_white)
draw_set_valign(fa_top)
draw_set_halign(fa_left)
draw_text(x-205,y-155,string(player.name) + "##LV: " + string(player.lvl) + "##HP:" + string(player.hp) + "/" + string(player.mHp) + "##WEP: " + string(player.weAtt)+ "-" + string(player.weAtt+2) + "##GUN: " + string(player.guAtt) + "-" + string(player.guAtt+2) + "##EXP: " + string(player.xp) + "##NXT: " + string(player.mXp))
if(gamepad_is_connected(0))
{
draw_sprite(s_xBut,0,x-200,y)
draw_sprite(s_bBut,0,x-200,y+24)
draw_sprite(s_aBut,0,x-200,y+48)
draw_sprite(s_yBut,0,x-200,y+72)
if(player.time &lt; player.mTime) draw_set_color(c_gray)
else draw_set_color(c_white)
draw_text(x-180,y-6,"ATTACK")
draw_text(x-180,y+18,"SHOOT x" +string(player.ammo))
draw_text(x-180,y+42,"HEAL x" + string(player.heals))
draw_text(x-180,y+66,"RUN")
}
else
{
draw_text(x-205,y,"Z: ")
draw_text(x-205,y+24,"X: ")
draw_text(x-205,y+48,"C: ")
draw_text(x-205,y+72,"V: ")
if(player.time &lt; player.mTime) draw_set_color(c_gray)
else draw_set_color(c_white)
draw_text(x-180,y,"ATTACK")
draw_text(x-180,y+24,"SHOOT x" +string(player.ammo))
draw_text(x-180,y+48,"HEAL x" + string(player.heals))
draw_text(x-180,y+72,"RUN")
}
draw_set_color(c_white)
for(i = 0; i &lt; ds_list_size(dialog);i++) draw_text(x-211,y+(145-(i*14)),ds_list_find_value(dialog,i))


//if(instance_exists(enPar)) draw_sprite_ext(enPar.sprite_index,0,x+125,y-50,3,3,0,c_white,1)
draw_sprite_ext(pSprite,0,x-25,y-50,-3,3,0,c_white,1)
draw_sprite(s_timeBack,0,x-75,y)
if(instance_exists(enPar))
{
draw_sprite(s_timeBack,0,x+76,y)
draw_sprite_ext(s_time,0,x-75,y,(player.time/player.mTime),1,0,c_white,1)
draw_text(x-45,y+25,"TIME")
draw_sprite_ext(s_time,0,x+76,y,(enPar.time/enPar.mTime),1,0,c_white,1)
draw_text(x+105,y+25,"TIME")
}
draw_set_color(c_white)
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
