<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>s_mPlayerDown</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-2</depth>
  <persistent>-1</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>randomize()
manageSounds()
audio_stop_all()
surface_resize(application_surface, display_get_width(), display_get_height());
if(file_exists("NNSave.sav") and !global.new) loadGame()
else
{
name = global.playName
mHp = 30
hp = mHp
dodge = 7
acc = 70
def = 1
weAtt = 3
guAtt = 11
ammo = 10
//mAmmo = 10
spd = 1.8
xp = 0
mXp = 20
money = 40
heals = 3
lvl = 1
dir = 270
wepCost = 30
gunCost = 50
audio_play_sound(slumMusic,1,1)
}

miss = 0
battle = 0
moving = 0
canHurt = 0
enCh = 32
time = 0
mTime = 360
walkSp = 2
encounters = 1
steps = 0
attacked = 16
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(hp &gt; mHp) hp = mHp
if(hp &lt;= 0)
{
hp = 0
if(!audio_is_playing(deathMusic))
{
audio_stop_all()
audio_play_sound(deathMusic,1,1)
}
}
if(ammo &gt; 99) ammo = 99
if(xp &gt;= mXp)
{
xp = (xp-mXp)
mXp = round(mXp * 1.2)
if(lvl &lt; 10) mHp += (5 + (lvl-1))
if(lvl &gt;= 10 and lvl &lt; 50) mHp += 3 + (lvl/5)
else mHp += (lvl/10)
mHp = round(mHp)
hp = mHp
lvl++
if(lvl%5 = 0)
{
def++
spd += 0.1
acc++
}
}

if(time &gt; mTime) time = mTime

if(money &gt; 999999) money = 999999
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>randomize()
upKey = keyboard_check(vk_up) or gamepad_button_check(0,gp_padu)
downKey = keyboard_check(vk_down) or gamepad_button_check(0,gp_padd)
leftKey = keyboard_check(vk_left) or gamepad_button_check(0,gp_padl)
rightKey = keyboard_check(vk_right) or gamepad_button_check(0,gp_padr)
aKey = keyboard_check_pressed(ord("C")) or gamepad_button_check_pressed(0,gp_face1)
bKey = keyboard_check(ord("X")) or gamepad_button_check(0,gp_face2)
xKey = keyboard_check_pressed(ord("Z")) or gamepad_button_check_pressed(0,gp_face3)
yKey = keyboard_check_pressed(ord("V")) or gamepad_button_check_pressed(0,gp_face4)
startKey = keyboard_check_pressed(vk_escape) or gamepad_button_check_pressed(0,gp_start)
selKey = keyboard_check_pressed(vk_shift) or gamepad_button_check_pressed(0,gp_select)


talking = instance_exists(dialogBox)
menu = instance_exists(statMenu) or instance_exists(saveMenu)
battle = instance_exists(battleBox)
shopping = instance_exists(shopBox)

//if(xKey) xp = mXp

if(bKey) walkSp = 4
else walkSp = 2

if(startKey and !menu and !battle) instance_create(x,y,saveMenu)

if(selKey and !battle and !shopping and speed = 0)
{
if(!menu) instance_create(view_xview[0] + 320,view_yview[0] + 240,statMenu)
else with(statMenu) instance_destroy()
}

if(speed = 0 and !battle and !shopping and !menu)
{
if(upKey and !place_meeting(x,y-32,blockPar) and !place_meeting(x,y-32,shop) and !talking) motion_set(90,walkSp)
if(downKey and !place_meeting(x,y+32,blockPar)and !place_meeting(x,y+32,shop) and !talking) motion_set(270,walkSp)
if(rightKey and !place_meeting(x+32,y,blockPar) and !place_meeting(x+32,y,shop) and !talking) motion_set(0,walkSp)
if(leftKey and !place_meeting(x+-32,y,blockPar) and !place_meeting(x-32,y,shop) and!talking) motion_set(180,walkSp)
}

if(speed &gt; 0) moving = 1
else moving = 0

if(place_meeting(x,y,land) and !talking and !battle and !menu)
{
if(upKey) dir = 90
if(downKey) dir = 270
if(rightKey) dir = 0
if(leftKey) dir = 180
}

if(aKey and speed = 0 and !menu and !shopping)
{
    if(!talking and !battle)
    {
    if(dir = 0) 
    {
    if(place_meeting(x+32,y,interacter))
    {
        npTalk = instance_place(x+32,y,interacter)
        if(npTalk.facing) with(npTalk) image_index = 2
        createDialog(npTalk.dialog)
    }
    else if(place_meeting(x+32,y,shop)) instance_create(x,y,shopBox)
    }
    if(dir = 90)
    {
        if(place_meeting(x,y-32,interacter))
        {
        npTalk = instance_place(x,y-32,interacter)
        if(npTalk.facing) with(npTalk) image_index = 0
        createDialog(npTalk.dialog)
        }
        else if(place_meeting(x,y-32,shop)) instance_create(x,y,shopBox)
    }    
    if(dir = 180) 
    {
        if(place_meeting(x-32,y,interacter))    
        {
        npTalk = instance_place(x-32,y,interacter)
        if(npTalk.facing) with(npTalk) image_index = 3
        createDialog(npTalk.dialog)
        }
        else if(place_meeting(x-32,y,shop)) instance_create(x,y,shopBox)   
    }
    if(dir = 270) 
    {
    if(place_meeting(x,y+32,interacter))
        {
        npTalk = instance_place(x,y+32,interacter)
        if(npTalk.facing) with(npTalk) image_index = 1
        createDialog(npTalk.dialog)
        }
        else if(place_meeting(x,y+32,shop)) instance_create(x,y,shopBox)
        }        
    }
    else with(dialogBox) instance_destroy()
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="transfer">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>motion_set(0,0)
room_goto(other.rDest)
x = other.xDest+16
y = other.yDest+16
audio_play_sound(transferSound,2,0)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="land">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(speed != 0)
{
steps++
motion_set(0,0)
randomize()
if(encounters)
{
if(steps &lt; 3) enCh = 80 
if(steps &gt;= 3 and steps &lt; 10) enCh = 32
if(steps &gt;= 10 and steps &lt; 20) enCh = 25
if(steps &gt; 30) enCh = 16
}
n = irandom(enCh)
if(n = enCh and encounters)
{
instance_create(view_xview[0]+260,view_yview[0]+240,battleBox)
battle = 1
enCh = 32
steps = 0
}
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(dir = 270) sprite_index = s_mPlayerDown
if(dir = 0) sprite_index = s_mPlayerRight
if(dir = 180) sprite_index = s_mPlayerLeft
if(dir = 90) sprite_index = s_mPlayerUp

if(moving) image_speed = 0.2
else
{
image_speed = 0
image_index = 0
}
//draw_text(x,y-32,enCh)
//draw_text(x,y-64,steps)
view_xview[0] = round(view_xview[0])
view_yview[0] = round(view_yview[0])
//texture_set_interpolation(1)
draw_sprite(s_shadow,0,x,y)
draw_self()

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
